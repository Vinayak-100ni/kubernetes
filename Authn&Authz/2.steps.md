1. create service account
   ``` kubectl create serviceaccount twp-day9 ```
2. create token ``` TOKEN=$(kubectl create token twp-day9) ```
3. we can check current context with command  ``` kubectl config current-context ``` [ ex- kubernetes-admin@kubernetes]
4. we can set credentials with ``` kubectl config set-credentials twp-day9--token-$TOKEN ```
5. now we set context ```kubectl config set-context twp-day9-user-context --cluster=day-9-and-10 --user=twp-day9 ```

   Context name:  twp-day9-user-context
    Connects:
     Cluster:   day-9-and-10  
     User:     twp-day9  
     Namespace: (not set ‚Üí default)
6. now we can switch context with the command ``` kubectl config use-context twp-day9-user-context ```
7. verify using command ```kubectl config current-context``` [twp-day9-user-context]
8. now we have to provide permissions to context ```AuthN done```
9. we will get all details in ```/etc/kubernetes/manifests$ ls ```

```etcd.yaml  kube-apiserver.yaml  kube-controller-manager.yaml  kube-scheduler.yaml```

```controlplane:/etc/kubernetes/manifests$ cat kube-apiserver.yaml ``` as AuthN and AuthZ will be done at Kube-apiServer 

10. ##### Kubernetes Authentication & Authorization Flow

üìÑ View here:
[Open Kubernetes authorization modes](Kubernetes%20authorization%20modes.md)

```bash
User / Pod / Node
|
| (kubectl / kubelet / token)
v
+----------------------+
| kube-apiserver |
+----------------------+
|
| 1. AUTHENTICATION (Who are you?)
v
+----------------------+
| User Verified |
+----------------------+
|
| 2. AUTHORIZATION (What can you do?)
v
+------------------------------------------------+
| Node | RBAC | ABAC | Webhook | Decision |
+------------------------------------------------+
|
v
‚úÖ ALLOWED ‚ùå FORBIDDEN
```
11. To check all resources ``` kubectl api-resources```
12.  now we can create role. [role .yml](Four%20Kubernetes%20RBAC.md#-roleyml)
13.  now we can preview the role with command ```kubectl auth reconcile -f  role.yml ```

```bash role.rbac.authorization.k8s.io/pod-reader reconciled
       reconciliation required create
        missing rules added:
               {Verbs:[get list watch] APIGroups:[] Resources:[pods] ResourceNames:[] NonResourceURLs:[]}```
14. we can create [rolebinging](Four%20Kubernetes%20RBAC.md#-rolebindingyml)

