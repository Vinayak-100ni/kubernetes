
# kube-scheduler â€“ Diagram Explained (Simple & Detailed)

![kube-scheduler](Screenshot%202025-12-01%20152502.png)

The **kube-scheduler** is the component that decides:

> **Which node a Pod should run on**

It works in two main phases:
1. **Scheduling Cycle**
2. **Binding Cycle**


## 1. What does kube-scheduler do?

Whenever a new Pod is created:

- The Pod is in **Pending** state
- It has **NO node assigned**
- The scheduler looks at all available worker nodes
- Then it selects the **best node** for that Pod

After that, the Pod is assigned to that node.

---

## 2. Scheduling Cycle (Finding the BEST node)

This is the **purple section** in the diagram.

Its job:  
ðŸ‘‰ Look at all nodes and find the **most suitable node**

Steps inside the Scheduling Cycle:

### âœ… PreEnqueue
First check:
- Is the pod valid for scheduling?
- Does it match basic rules?

If yes â†’ move forward

---

### âœ… Sort
Nodes are listed in an organized way (for faster processing).

---

### âœ… PreFilter
Checks basic Pod requirements like:
- CPU
- Memory
- NodeSelector
- Taints/Tolerations

If requirements cannot be met â†’ Node is skipped

---

### âœ… Filter
Removes nodes that **cannot run the Pod**.

Example:
- Node is full
- Wrong region
- Missing labels

Now only **valid nodes** remain.

---

### âœ… PostFilter
If **no nodes are left**, it tries alternatives:
- Preemption (remove low-priority pods)
- Other strategies

If still no node:
```

Pod stays in Pending state

```

---

### âœ… PreScore
Prepares data to calculate score per node.

---

### âœ… Normalize Score
Adjusts scores to same scale so comparison is fair.

---

### âœ… Score
Each node gets a score (number value)

Example:
```

Node-A = 75
Node-B = 90 âœ…

````

The scheduler now knows which node is BEST.

---

### âœ… Reserve
Temporarily "reserves" the chosen node
So no other Pod can take that place.

---

### âœ… Permit
Final permission check.
If anything fails â†’ scheduling stops.

âœ… Scheduling Cycle completed  
Now the best node is selected.

---

## 3. Binding Cycle (Assigning the Pod)

This is the **yellow section** in the diagram.

Its job:  
ðŸ‘‰ Actually assign the Pod to the Node

Steps:

### âœ… PreBind
Last checks before binding.

---

### âœ… Bind
This is the main action:
> The Pod is officially attached to the node

The API Server is updated.

Now the Pod is no longer "Pending".

---

### âœ… PostBind
Cleanup tasks after binding.

---

### âœ… WaitOnPermit
If any plugin needs time, the scheduler waits here.

---

## 4. Simple Flow in One Line

```text
Pod Created â†’ Scheduler checks Nodes â†’ Picks best Node â†’ Pod assigned to Node
````

OR

```text
Pending Pod â†’ Scheduling Cycle â†’ Binding Cycle â†’ Running Pod
```

---

## 5. Real Life Example

You create a pod like this:

```yaml
apiVersion: v1
kind: Pod
metadata:
  name: nginx
spec:
  containers:
  - name: nginx
    image: nginx
```

What happens:

1. Goes to API Server
2. Stored in etcd
3. Scheduler sees the pod
4. Picks Node-2 (best resources)
5. Assigns Pod to Node-2
6. Kubelet starts the container

---

## 6. Why this matters in ArgoCD

If Scheduler fails or no node matches:

* App in ArgoCD shows **Degraded**
* Pod remains in **Pending**
* Nothing runs

So scheduler is **critical for app health**.

---

## In very simple terms:

Think of kube-scheduler like:

ðŸ§  **Job recruiter for Pods**

It looks at:

* All worker nodes
* All resource requirements
* Chooses the best home for your Pod

---

If you want, next I can create:

âœ… md for kube-controller-manager
âœ… Full Kubernetes flow doc
âœ… Interview notes based on this

Just say: **"Create next kube-controller-manager md"**

```
```
